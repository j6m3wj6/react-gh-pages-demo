(this["webpackJsonptymphany-bidding"]=this["webpackJsonptymphany-bidding"]||[]).push([[0],{233:function(e,t,n){},330:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),i=n.n(c),r=n(67),s=n.n(r),o=(n(232),n(233),n(27)),d=n.n(o),l=n(46),j=n(30),b=n(347),u=n(213),p=n(72),h=n(210),m=n.n(h);var x=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{children:Object(a.jsxs)(b.a.Item,{as:"a",header:!0,children:[Object(a.jsx)(u.a,{src:"/tymphany-bidding-demo/img/logo.png",style:{height:"60px",marginRight:"8px"}}),"2021 Bidding Activity",Object(a.jsx)(p.a,{name:"exclamation"})]})}),Object(a.jsx)("div",{className:"countdown",children:e.timeOut?Object(a.jsx)("span",{children:"\u7af6\u6a19\u5df2\u622a\u6b62"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p.a,{style:{marginTop:"auto",marginBottom:"auto"},name:"hourglass two"}),Object(a.jsx)(m.a,{givenDate:new Date(2021,1,5,12,0),hangleTimeOut:e.hangleTimeOut})]})})]})},O=n(57),g=n.n(O),f=(n(328),n(344)),v=n(331),y=n(348),w=n(345),N=n(162),k=n(351),_=n(346),S=n(350),C=n(343),F=n(103);var D=function(e){var t=i.a.useState({name:"",number:"",email:"",price:""}),n=Object(j.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),o=Object(j.a)(s,2),b=o[0],u=o[1],p=function(e,t){var n=t.name,a=t.value,i=c;i[n]=a,r(i),u(!1)},h=function(){var t=Object(l.a)(d.a.mark((function t(){var n,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!0,a=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,/./.test(c.name)&&/[0-9]{7}/.test(c.number)&&a.test(c.email)&&/^\d*[05]{1}0$/.test(c.price)||(n=!1),c.price-e.basic_price<0&&(n=!1,u(!0)),i={_no:e._no,updateContent:{bidding:Object(N.a)(Object(N.a)({},c),{},{time:Date.now()})}},n?m(i):console.log("not complete");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(l.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.post("https://tymphany-bidding-server.herokuapp.com/api/bidding/append",n,{"Content-Type":"application/json"}).then((function(t){e.submitFinish(),console.log(t)})).catch((function(e){console.log(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)(k.a,{horizontal:!0,children:Object(a.jsxs)(_.a,{error:!0,style:{margin:"30px auto"},children:[Object(a.jsxs)(_.a.Field,{children:[Object(a.jsx)("label",{id:"movie",children:"\u59d3\u540d (Name)"}),Object(a.jsx)(_.a.Input,{required:!0,placeholder:"ex. Tong Wang",name:"name",onChange:p})]}),Object(a.jsxs)(_.a.Field,{children:[Object(a.jsx)("label",{children:"\u5de5\u865f (EmployeeID)"}),Object(a.jsx)(_.a.Input,{required:!0,pattern:"[0-9]{7}",placeholder:"ex. 2000xxx",name:"number",onChange:p})]}),Object(a.jsxs)(_.a.Field,{children:[Object(a.jsx)("label",{children:"Email "}),Object(a.jsx)(_.a.Input,{required:!0,type:"email",placeholder:"ex. tong.wang@tymphany.com",name:"email",onChange:p})]}),Object(a.jsxs)(_.a.Field,{children:[Object(a.jsx)("label",{children:"\u51fa\u50f9 (Bidding Price) "}),Object(a.jsxs)("div",{className:"price-container",children:[Object(a.jsxs)(S.a,{color:"red",size:"small",className:"price-basic",children:[Object(a.jsx)(S.a.Value,{children:e.basic_price}),Object(a.jsxs)(S.a.Label,{children:["\u5e95\u50f9  ",Object(a.jsx)("br",{}),"Base price"]})]}),Object(a.jsxs)("div",{className:"price-input",children:[Object(a.jsxs)(C.a,{required:!0,pattern:"^\\d*[05]{1}0$",name:"price",title:"\u8acb\u4ee550\u5143\u70ba\u55ae\u4f4d\u51fa\u50f9\u3002",labelPosition:"left",type:"text",onChange:p,placeholder:"ex. ".concat(e.basic_price),children:[Object(a.jsx)(F.a,{basic:!0,children:"$"}),Object(a.jsx)("input",{})]}),Object(a.jsxs)("span",{className:"caption",children:["*\u8acb\u4ee550\u5143\u70ba\u55ae\u4f4d\u51fa\u50f9 ",Object(a.jsx)("br",{}),"Price must be in multiples of 50"]})]})]})]}),b&&Object(a.jsx)(y.a,{error:!0,header:"\u8acb\u8f38\u5165\u9ad8\u65bc\u5e95\u50f9\u7684\u6578\u76ee",content:"Price must be higher than base price"}),Object(a.jsx)(v.a,{type:"submit",onClick:h,children:"Submit"})]})})};var z=function(e){var t=i.a.useState(e.biddingData),n=Object(j.a)(t,2),r=(n[0],n[1]),s=function(){var t=Object(l.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("https://tymphany-bidding-server.herokuapp.com/api/bidding?_no=".concat(e.data._no));case 2:n=t.sent,r(n.data.content[0].bidding);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){s()}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"detail",children:[Object(a.jsxs)("span",{className:"conditions",children:[Object(a.jsx)("strong",{children:" Check: "}),e.data.conditions]}),Object(a.jsxs)("p",{className:"shortage",children:[Object(a.jsx)("strong",{children:" Shortage: "})," ",e.data.shortage]})]})})};var E=function(e){var t=i.a.useState(-1),n=Object(j.a)(t,2),r=n[0],s=n[1],o=i.a.useState(-1),b=Object(j.a)(o,2),h=b[0],m=b[1],x=i.a.useState({}),O=Object(j.a)(x,2),N=O[0],k=O[1],_=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://tymphany-bidding-server.herokuapp.com/api/bidding");case 2:t=e.sent,console.log("fetchResource",t),k(t.data.content);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){_()}),[]);var S=function(e){s(e.target.name),m(-1)},C=function(e){m(e.target.name),s(-1)},F=function(){m(-1),s(-1)},E=function(){m(-1),_()},A=function(t){var n=t.data,c=t.index,i=n.bidding;i.sort((function(e,t){return t.price-e.price}));var s=i.length>0?"\u5373\u6642\u51fa\u50f9 $ ":"\u5c1a\u672a\u6709\u4eba\u51fa\u50f9",o=i.length>0?"".concat(i[0].price):"";return Object(a.jsxs)("div",{className:"tg_card",children:[Object(a.jsx)("div",{className:"img-content",children:Object(a.jsx)(u.a,{className:"img",centered:!0,src:"/tymphany-bidding-demo"+"/img/".concat(n._no,".jpg")})}),Object(a.jsxs)("div",{style:{height:"fit-content"},children:[Object(a.jsxs)("h5",{className:"brand",children:[" ","#".concat(n._no," ").concat(n.module)]}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(a.jsx)("p",{children:n.brand}),Object(a.jsxs)("p",{style:{marginRight:"8px"},children:["pcs: ",n.pcs]})]}),n.set.length>0&&Object(a.jsxs)("p",{className:"set",children:["set with: ",n.set]})]}),Object(a.jsx)(f.a,{}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{className:"price-title",children:[" ",s," ",Object(a.jsxs)("strong",{style:{fontSize:"18px",color:"#0077aa"},children:[" ",o," "]})]})}),Object(a.jsxs)("div",{className:"operations-buttons",children:[Object(a.jsx)(v.a,{inverted:!0,color:"blue",className:"operation-button",name:c,onClick:S,children:" Details "}),Object(a.jsx)(v.a,{inverted:!0,color:"red",className:"operation-button",name:c,onClick:C,children:" Bid "}),(c==r||c==h)&&Object(a.jsx)(p.a,{name:"chevron up",bordered:!0,onClick:F,style:{minWidth:"30px",margin:"auto",borderRadius:"3px"}})]}),c==r&&Object(a.jsx)(z,{data:n,biddingData:i}),c==h&&(e.timeOut?Object(a.jsx)(y.a,{info:!0,header:"\u5f97\u6a19 (Winner)\uff1a ".concat(i.length>0?i[0].name:"\u7121"),content:"\u5f97\u6a19\u91d1\u984d (Endding Price): ".concat(o)}):Object(a.jsx)(D,{basic_price:n.basic_price,_no:n._no,submitFinish:E}))]})};return Object(a.jsx)(a.Fragment,{children:N.length>0?N.map((function(e,t){return Object(a.jsx)(A,{data:e,index:t})})):Object(a.jsx)("div",{className:"loader-container",children:Object(a.jsx)(w.a,{active:!0,inline:"centered",className:"loader"})})})},A=n(352);var B=function(e){var t=i.a.useState({}),n=Object(j.a)(t,2),r=n[0],s=n[1],o=i.a.useState({name:"",number:""}),b=Object(j.a)(o,2),u=(b[0],b[1],i.a.useState(!1)),p=Object(j.a)(u,2),h=p[0],m=p[1],O=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://tymphany-bidding-server.herokuapp.com/api/bidding");case 2:t=e.sent,console.log("fetchResource",t),s(t.data.content);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){O()}),[]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(x,{timeOut:h,hangleTimeOut:function(){console.log("timeOut"),m(!0)}}),Object(a.jsx)(A.a.Group,{horizontal:!0,textAlign:"center",children:Object(a.jsx)(E,{timeOut:h,data:r})})]})};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root"))}},[[330,1,2]]]);
//# sourceMappingURL=main.7d1fb8ef.chunk.js.map
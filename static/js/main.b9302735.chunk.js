(this["webpackJsonptymphany-bidding"]=this["webpackJsonptymphany-bidding"]||[]).push([[0],{233:function(e,t,n){},330:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),i=n.n(c),r=n(65),s=n.n(r),o=(n(232),n(233),n(40)),d=n.n(o),l=n(88),j=n(43),b=n(347),u=n(213),h=n(70),p=n(210),m=n.n(p);var x=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{inverted:!0,children:Object(a.jsxs)(b.a.Item,{as:"a",header:!0,children:[Object(a.jsx)(u.a,{src:"/tymphany-bidding-demo/img/logo.png",style:{height:"60px",marginRight:"8px"}}),"2021 Bidding Activity",Object(a.jsx)(h.a,{name:"exclamation"})]})}),Object(a.jsx)("div",{className:"countdown",children:e.timeOut?Object(a.jsx)("span",{children:"\u7af6\u6a19\u5df2\u622a\u6b62"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,{style:{height:"100%"},name:"hourglass two"}),Object(a.jsx)(m.a,{givenDate:new Date(2021,1,5,12,0),hangleTimeOut:e.hangleTimeOut})]})})]})},O=n(161),g=n(102),f=n.n(g),v=(n(328),n(351)),y=n(346),w=n(350),N=n(343),k=n(103),_=n(348),C=n(331),S=n(344),F=function(e){var t=i.a.useState({name:"",number:"",email:"",price:""}),n=Object(j.a)(t,2),c=n[0],r=n[1],s=i.a.useState(!1),o=Object(j.a)(s,2),b=o[0],u=o[1],h=function(e,t){var n=t.name,a=t.value,i=c;i[n]=a,r(i),u(!1)},p=function(){var t=Object(l.a)(d.a.mark((function t(){var n,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!0,a=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,/./.test(c.name)&&/[0-9]{7}/.test(c.number)&&a.test(c.email)&&/^\d*[05]{1}0$/.test(c.price)||(n=!1),c.price-e.basic_price<0&&(n=!1,u(!0)),i={_no:e._no,updateContent:{bidding:Object(O.a)(Object(O.a)({},c),{},{time:Date.now()})}},n?m(i):console.log("not complete");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(l.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.post("https://tymphany-bidding-server.herokuapp.com/api/bidding/append",n,{"Content-Type":"application/json"}).then((function(t){e.submitFinish(),console.log(t)})).catch((function(e){console.log(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)(v.a,{horizontal:!0,children:Object(a.jsxs)(y.a,{error:!0,style:{margin:"30px auto"},children:[Object(a.jsxs)(y.a.Field,{children:[Object(a.jsx)("label",{id:"movie",children:"\u59d3\u540d (Name)"}),Object(a.jsx)(y.a.Input,{required:!0,placeholder:"ex. Tong Wang",name:"name",onChange:h})]}),Object(a.jsxs)(y.a.Field,{children:[Object(a.jsx)("label",{children:"\u5de5\u865f (EmployeeID)"}),Object(a.jsx)(y.a.Input,{required:!0,pattern:"[0-9]{7}",placeholder:"ex. 2000xxx",name:"number",onChange:h})]}),Object(a.jsxs)(y.a.Field,{children:[Object(a.jsx)("label",{children:"Email "}),Object(a.jsx)(y.a.Input,{required:!0,type:"email",placeholder:"ex. tong.wang@tymphany.com",name:"email",onChange:h})]}),Object(a.jsxs)(y.a.Field,{children:[Object(a.jsx)("label",{children:"\u51fa\u50f9 (Bidding Price) "}),Object(a.jsxs)("div",{className:"price-container",children:[Object(a.jsxs)(w.a,{color:"red",size:"small",className:"price-basic",children:[Object(a.jsx)(w.a.Value,{children:e.basic_price}),Object(a.jsxs)(w.a.Label,{children:["\u5e95\u50f9  ",Object(a.jsx)("br",{}),"Base price"]})]}),Object(a.jsxs)("div",{className:"price-input",children:[Object(a.jsxs)(N.a,{required:!0,pattern:"^\\d*[05]{1}0$",name:"price",title:"\u8acb\u4ee550\u5143\u70ba\u55ae\u4f4d\u51fa\u50f9\u3002",labelPosition:"left",type:"text",onChange:h,placeholder:"ex. ".concat(e.basic_price),children:[Object(a.jsx)(k.a,{basic:!0,children:"$"}),Object(a.jsx)("input",{})]}),Object(a.jsxs)("span",{className:"caption",children:["*\u8acb\u4ee550\u5143\u70ba\u55ae\u4f4d\u51fa\u50f9 ",Object(a.jsx)("br",{}),"Price must be in multiples of 50"]})]})]})]}),b&&Object(a.jsx)(_.a,{error:!0,header:"\u8acb\u8f38\u5165\u9ad8\u65bc\u5e95\u50f9\u7684\u6578\u76ee",content:"Price must be higher than base price"}),Object(a.jsx)(C.a,{type:"submit",onClick:p,children:"Submit"})]})})},D=function(e){var t=i.a.useState(e.biddingData),n=Object(j.a)(t,2),r=(n[0],n[1]),s=function(){var t=Object(l.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("https://tymphany-bidding-server.herokuapp.com/api/bidding?_no=".concat(e.data._no));case 2:n=t.sent,r(n.data.content[0].bidding);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){s()}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"detail",children:[Object(a.jsxs)("span",{className:"conditions",children:[Object(a.jsx)("strong",{children:" Check: "}),e.data.conditions]}),Object(a.jsxs)("p",{className:"shortage",children:[Object(a.jsx)("strong",{children:" Shortage: "})," ",e.data.shortage]})]})})};var z=function(e){e.data.length&&e.data.length;var t=i.a.useState(-1),n=Object(j.a)(t,2),c=n[0],r=n[1],s=i.a.useState(-1),o=Object(j.a)(s,2),d=o[0],l=o[1],b=function(e){r(e.target.name),l(-1)},p=function(e){l(e.target.name),r(-1)},m=function(){l(-1),r(-1)},x=function(){l(-1)},O=function(t){var n=t.data,i=t.index,r=n.bidding;r.sort((function(e,t){return t.price-e.price}));var s=r.length>0?"\u5373\u6642\u51fa\u50f9 $ ":"\u5c1a\u672a\u6709\u4eba\u51fa\u50f9",o=r.length>0?"".concat(r[0].price):"";return Object(a.jsxs)("div",{className:"tg_card",children:[Object(a.jsx)("div",{className:"img-content",children:Object(a.jsx)(u.a,{className:"img",centered:!0,src:"/tymphany-bidding-demo"+"/img/".concat(n._no,".jpg")})}),Object(a.jsxs)("div",{style:{height:"fit-content"},children:[Object(a.jsxs)("h5",{className:"brand",children:[" ","#".concat(n._no," ").concat(n.module)]}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(a.jsx)("p",{children:n.brand}),Object(a.jsxs)("p",{style:{marginRight:"8px"},children:["pcs: ",n.pcs]})]}),n.set.length>0&&Object(a.jsxs)("p",{className:"set",children:["set with: ",n.set]})]}),Object(a.jsx)(S.a,{}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{className:"price-title",children:[" ",s,o]})}),Object(a.jsxs)("div",{className:"operations-buttons",children:[Object(a.jsx)(C.a,{inverted:!0,color:"blue",className:"operation-button",name:i,onClick:b,children:" Detail "}),Object(a.jsx)(C.a,{inverted:!0,color:"red",className:"operation-button",name:i,onClick:p,children:" Bid "}),(i==c||i==d)&&Object(a.jsx)(h.a,{name:"chevron up",bordered:!0,onClick:m,style:{minWidth:"30px",margin:"auto",borderRadius:"3px"}})]}),i==c&&Object(a.jsx)(D,{data:n,biddingData:r}),i==d&&(e.timeOut?Object(a.jsx)(_.a,{info:!0,header:"\u5f97\u6a19 (Winner)\uff1a ".concat(r.length>0?r[0].name:"\u7121"),content:"\u5f97\u6a19\u91d1\u984d (Endding Price): ".concat(o)}):Object(a.jsx)(F,{basic_price:n.basic_price,_no:n._no,submitFinish:x}))]})};return Object(a.jsx)(a.Fragment,{children:e.data.map((function(e,t){return Object(a.jsx)(O,{data:e,index:t})}))})},A=n(352),E=n(345);var I=function(e){var t=i.a.useState({}),n=Object(j.a)(t,2),r=n[0],s=n[1],o=i.a.useState({name:"",number:""}),b=Object(j.a)(o,2),u=(b[0],b[1],i.a.useState(!1)),h=Object(j.a)(u,2),p=h[0],m=h[1],O=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://tymphany-bidding-server.herokuapp.com/api/bidding");case 2:t=e.sent,console.log("fetchResource",t),s(t.data.content);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){O()}),[]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(x,{timeOut:p,hangleTimeOut:function(){console.log("timeOut"),m(!0)}}),r.length>0?Object(a.jsx)(A.a.Group,{horizontal:!0,textAlign:"center",children:Object(a.jsx)(z,{timeOut:p,data:r})}):Object(a.jsx)("div",{className:"loader-container",children:Object(a.jsx)(E.a,{active:!0,inline:"centered",className:"loader"})})]})};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(I,{})}),document.getElementById("root"))}},[[330,1,2]]]);
//# sourceMappingURL=main.b9302735.chunk.js.map